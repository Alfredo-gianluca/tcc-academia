{% load static %}

<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/estilo.css' %}" rel="stylesheet">

    <!-- jQuery UI CSS (Calendário bonito) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css">

    <title>Cadastro - FitCore</title>
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container d-flex justify-content-center">
            <a class="navbar-brand mx-auto" href="{% url 'membros' %}">FitCore</a>
        </div>
    </nav>

    <section class="hero">
        <div class="container hero-content text-center">
            <h1>Cadastro de Cliente</h1>
            <p>Preencha os dados abaixo para acessar suas consultas e fichas.</p>
        </div>
    </section>

    <section class="section section-dark">
        <div class="container">
            <div class="form-container fade-in">

                <form method="POST" action="{% url 'cadastro' %}" enctype="multipart/form-data">
                    {% csrf_token %}

                    <!-- Exibir erros -->
                    {% if form.errors %}
                    <div class="alert alert-danger">
                        <ul>
                            {% for field in form %}
                                {% for error in field.errors %}
                                    <li><strong>{{ field.label }}:</strong> {{ error }}</li>
                                {% endfor %}
                            {% endfor %}
                            {% for error in form.non_field_errors %}
                                <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% endif %}

                    {{ form.as_p }}

                    <button type="submit" class="btn btn entrar"><strong>Cadastrar</strong></button>
                    <p>Já possui uma conta? <a class="cadastro" href="{% url 'login' %}">Login</a></p>
                </form>

            </div>
        </div>
    </section>

    <!-- Bootstrap -->
    <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>

    <!-- jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- jQuery UI (Calendário) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

    <!-- Inputmask (Máscara DD/MM/AAAA) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.7/jquery.inputmask.min.js"></script>

    <script>
        $(document).ready(function () {

            // MÁSCARA DD/MM/AAAA — impede letras, símbolos e excesso de caracteres
            $("#id_data_nascimento").inputmask("99/99/9999", {
                clearIncomplete: true,
                placeholder: "dd/mm/aaaa",
                showMaskOnHover: false,
                showMaskOnFocus: true
            });

            // CALENDÁRIO jQuery UI
            $("#id_data_nascimento").datepicker({
                dateFormat: "dd/mm/yy",
                changeMonth: true,
                changeYear: true,
                yearRange: "1900:2030",
                dayNamesMin: ["D", "S", "T", "Q", "Q", "S", "S"],
                monthNames: [
                    "Janeiro","Fevereiro","Março","Abril","Maio","Junho",
                    "Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"
                ]
            });

        });
    </script>

    <!-- Mostrar / ocultar senha -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const camposSenha = ["id_senha", "id_Confirmar_Senha"];

            camposSenha.forEach(id => {
                let campo = document.getElementById(id);

                if (campo) {
                    let btn = document.createElement("span");
                    btn.innerHTML = '<i class="fa fa-eye" style="cursor:pointer;"></i>';
                    btn.style.marginLeft = "10px";

                    btn.onclick = function () {
                        campo.type = campo.type === "password" ? "text" : "password";
                        btn.innerHTML = campo.type === "password"
                            ? '<i class="fa fa-eye"></i>'
                            : '<i class="fa fa-eye-slash"></i>';
                    };

                    campo.parentNode.appendChild(btn);
                }
            });
        });
    </script>

</body>
</html>
